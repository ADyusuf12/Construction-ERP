<% content_for :title, "Employee Profile" %>
<div class="border-b border-hamzis-brown/20 mb-6">
  <nav class="flex gap-6 text-sm font-medium">
    <button data-tab="employment"
            class="tab-link px-3 py-2 rounded-t bg-hamzis-copper text-white">
      Employment
    </button>
    <button data-tab="personal"
            class="tab-link px-3 py-2 rounded-t hover:bg-hamzis-copper hover:text-white">
      Personal Details
    </button>
    <button data-tab="history"
            class="tab-link px-3 py-2 rounded-t hover:bg-hamzis-copper hover:text-white">
      History
    </button>
    <button data-tab="documents"
            class="tab-link px-3 py-2 rounded-t hover:bg-hamzis-copper hover:text-white">
      Documents
    </button>
  </nav>
</div>
<div id="employment-tab" class="tab-content">
  <%= render "hr/employees/tabs/employment", employee: @employee %>
</div>
<div id="personal-tab" class="tab-content hidden">
  <%= render "hr/employees/tabs/personal", employee: @employee %>
</div>
<div id="history-tab" class="tab-content hidden">
  <%= render "hr/employees/tabs/history", employee: @employee %>
</div>
<div id="documents-tab" class="tab-content hidden">
  <%= render "hr/employees/tabs/documents", employee: @employee %>
</div>
<script nonce="<%= content_security_policy_nonce %>">
  (() => {
    const links = document.querySelectorAll(".tab-link");
    const contents = document.querySelectorAll(".tab-content");

    links.forEach(link => {
      link.addEventListener("click", () => {
        // reset all tabs
        links.forEach(l => l.classList.remove("bg-hamzis-copper", "text-white"));
        contents.forEach(c => c.classList.add("hidden"));

        // activate clicked tab
        link.classList.add("bg-hamzis-copper", "text-white");
        const tabId = link.getAttribute("data-tab") + "-tab";
        document.getElementById(tabId).classList.remove("hidden");
      });
    });
  })();
</script>
