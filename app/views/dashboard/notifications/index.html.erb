<%= turbo_frame_tag "modal_content" do %>
  <div class="relative bg-white dark:bg-brand-black">
    <%# --- Close Button --- %>
    <button type="button"
            onclick="document.getElementById('modal').classList.add('hidden')"
            class="absolute top-6 right-6 p-2 text-brand-secondary/20 hover:text-brand-primary transition-all active:scale-90 z-50">
      <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
    <%# --- Header Section --- %>
    <div class="px-8 pt-8 pb-4">
      <div class="flex items-center gap-3 mb-1">
        <div class="h-1 w-6 bg-brand-primary rounded-full"></div>
        <h2 class="text-2xl font-black uppercase tracking-tighter text-brand-secondary dark:text-brand-primary">
          Notification Archive
        </h2>
      </div>
      <p class="text-[10px] font-bold uppercase tracking-[0.2em] text-brand-secondary/30 mb-6">
        Operational Oversight Hub â€¢ <span class="text-brand-primary"><%= current_user.notifications.count %> total</span>
      </p>
    </div>
    <%# --- The Scrollable List Container --- %>
    <div class="max-h-[60vh] overflow-y-auto border-y border-brand-secondary/5 bg-gray-50/30 dark:bg-white/5 scrollbar-hide">
      <div id="modal_notifications_list">
        <% if @notifications.any? %>
          <%= render partial: "dashboard/notifications/notification",
                     collection: @notifications,
                     as: :notification %>
        <% else %>
          <div class="py-24 text-center">
            <svg class="w-12 h-12 text-brand-secondary/10 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0a2 2 0 01-2 2H6a2 2 0 01-2-2m16 0l-8 4-8-4" />
            </svg>
            <p class="text-[10px] font-black uppercase tracking-[0.2em] text-brand-secondary/20">Archive Empty</p>
          </div>
        <% end %>
      </div>
    </div>
    <%# --- Footer with Integrated Pagination & Actions --- %>
    <div class="p-6 bg-white dark:bg-brand-black flex flex-col sm:flex-row gap-4 justify-between items-center">
      <%# Kaminari Custom Styling Wrapper %>
      <div class="notification-pagination scale-90 origin-left">
        <%= paginate @notifications, remote: true %>
      </div>
      <div class="flex items-center gap-6">
        <%= button_to mark_all_as_read_notifications_path,
                      method: :post,
                      class: "text-[9px] font-black uppercase tracking-[0.2em] text-brand-secondary/40 hover:text-brand-primary transition-colors flex items-center gap-2 group",
                      data: { turbo_frame: "_top" } do %>
          <svg class="w-3 h-3 text-brand-primary opacity-40 group-hover:opacity-100" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
          </svg>
          Mark all as read
        <% end %>
      </div>
    </div>
  </div>
<% end %>