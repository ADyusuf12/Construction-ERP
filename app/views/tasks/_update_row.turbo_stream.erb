<%= turbo_stream.replace dom_id(@task) do %>
  <%# 1. Grab the index to maintain zebra striping %>
  <% index = @task.project.tasks.order(:created_at).pluck(:id).index(@task.id) %>
  <%# 2. Pass the exact variables your partial expects %>
  <%= render "tasks/task_row",
             task: @task,
             show_project: params[:project_id].blank?,
             show_details: params[:project_id].present?,
             row_class: (index.even? ? "bg-hamzis-brown/5 dark:bg-hamzis-copper/5" : "") %>
<% end %>
<%= turbo_stream.replace "project_progress" do %>
  <%= render "projects/progress_bar", project: @task.project %>
<% end %>