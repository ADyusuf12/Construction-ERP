<tr id="<%= dom_id(task) %>" class="<%= row_class %> hover:bg-hamzis-white/40 dark:hover:bg-hamzis-black/40 transition">
  <!-- Title -->
  <td class="px-4 py-3 font-semibold"><%= task.title %></td>
  <% if local_assigns[:show_project] %>
    <!-- Project -->
    <td class="px-4 py-3"><%= link_to task.project.name, project_path(task.project), class: "text-hamzis-copper hover:underline" %></td>
  <% elsif local_assigns[:show_details] %>
    <!-- Details -->
    <td class="px-4 py-3"><%= truncate(task.details, length: 50) if task.details.present? %></td>
  <% end %>
  <!-- Status -->
  <td class="px-4 py-3">
    <span class="px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap
    <%= task.status_pending? ? 'bg-yellow-100 text-yellow-700' :
        task.status_in_progress? ? 'bg-blue-100 text-blue-700' :
        task.status_done? ? 'bg-green-100 text-green-700' :
        'bg-gray-100 text-gray-700' %>">
      <%= task.status.humanize %>
    </span>
  </td>
  <!-- Due Date -->
  <td class="px-4 py-3"><%= task.due_date&.strftime("%b %d, %Y") || "â€”" %></td>
  <!-- Weight -->
  <td class="px-4 py-3"><%= task.weight %></td>
  <!-- Assigned Users -->
  <td class="px-4 py-3">
    <% if task.users.any? %>
      <%= task.users.map { |u| u.employee&.full_name || u.email }.join(", ") %>
    <% else %>
      <span class="text-gray-500">Unassigned</span>
    <% end %>
  </td>
  <!-- Actions -->
  <td class="px-4 py-3 flex gap-2">
    <%= link_to "View", project_task_path(task.project, task),
      class: "px-3 py-1 rounded bg-hamzis-copper text-white hover:bg-hamzis-black transition text-xs" %>
    <%= link_to "Edit", edit_project_task_path(task.project, task),
      class: "px-3 py-1 rounded bg-hamzis-brown text-white hover:bg-hamzis-copper transition text-xs" %>
    <% if task.status_pending? %>
      <%= button_to "Mark In Progress",
        in_progress_project_task_path(task.project, task),
        method: :patch,
        data: { turbo_stream: true, disable_with: "Marking..." },
        class: "px-3 py-1 rounded bg-yellow-600 text-white hover:bg-yellow-800 transition text-xs" %>
    <% elsif task.status_in_progress? %>
      <%= button_to "Mark as Done",
        complete_project_task_path(task.project, task),
        method: :patch,
        data: { turbo_stream: true, disable_with: "Marking..." },
        class: "px-3 py-1 rounded bg-green-600 text-white hover:bg-green-800 transition text-xs" %>
    <% end %>
  </td>
</tr>
