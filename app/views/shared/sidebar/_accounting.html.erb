<% if user_signed_in? && (
      policy(Accounting::Transaction).index? ||
      policy(Accounting::SalaryBatch).index? ||
      policy(Accounting::Salary).index? ||
      policy(Accounting::Deduction).index?
    ) %>
<div class="space-y-4 py-2">
    <!-- Section Header -->
    <div class="px-3">
        <span class="block text-[10px] font-black uppercase tracking-[0.3em] text-brand-secondary/40 dark:text-white border-b border-brand-secondary/10 dark:border-brand-primary/10 pb-1 mb-2">
            Accounting
        </span>
    </div>
    <div class="px-2 space-y-1">
        <%# 1. Transactions Dropdown %>
        <% if policy(Accounting::Transaction).index? %>
        <div class="group">
            <button type="button" class="flex justify-between items-center w-full px-3 py-2.5 rounded-xl border border-transparent hover:bg-brand-secondary/5 dark:hover:bg-brand-primary/5 transition-all duration-300" onclick="document.getElementById('transactions-dropdown').classList.toggle('hidden')">
                <span class="flex items-center">
                    <svg class="w-4 h-4 mr-3 text-brand-secondary/70 dark:text-brand-primary/70 group-hover:text-brand-primary transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 7h18M3 11h18M3 15h10" />
                    </svg>
                    <span class="text-[11px] font-black uppercase tracking-widest text-brand-secondary dark:text-brand-primary">Transactions</span>
                </span>
                <svg class="w-3 h-3 text-brand-secondary/30 dark:text-brand-primary/30 group-hover:text-brand-primary transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                    <path d="M19 9l-7 7-7-7" />
                </svg>
            </button>
            <div id="transactions-dropdown" class="ml-9 mt-1 space-y-1 border-l-2 border-brand-secondary/10 dark:border-brand-primary/10 hidden">
                <%= link_to accounting_transactions_path,
                class: "flex items-center px-4 py-2 text-[10px] font-bold uppercase tracking-widest transition-all
                #{current_page?(accounting_transactions_path) ? 'text-brand-primary border-l-2 border-brand-primary -ml-[2px] bg-brand-primary/5' : 'text-brand-secondary/50 dark:text-brand-primary/40 hover:text-brand-secondary dark:hover:text-white hover:bg-brand-secondary/5'}" do %>
                All Transactions
                <% end %>
                <% if policy(Accounting::Transaction).create? %>
                <%= link_to new_accounting_transaction_path,
                  class: "flex items-center px-4 py-2 text-[10px] font-bold uppercase tracking-widest transition-all
                  #{current_page?(new_accounting_transaction_path) ? 'text-brand-primary border-l-2 border-brand-primary -ml-[2px] bg-brand-primary/5' : 'text-brand-secondary/50 dark:text-brand-primary/40 hover:text-brand-secondary dark:hover:text-white hover:bg-brand-secondary/5'}" do %>
                New Transaction
                <% end %>
                <% end %>
            </div>
        </div>
        <% end %>
        <%# 2. Expenses Dropdown %>
        <div class="group">
            <button type="button" class="flex justify-between items-center w-full px-3 py-2.5 rounded-xl border border-transparent hover:bg-brand-secondary/5 dark:hover:bg-brand-primary/5 transition-all duration-300" onclick="document.getElementById('expenses-dropdown').classList.toggle('hidden')">
                <span class="flex items-center">
                    <svg class="w-4 h-4 mr-3 text-brand-secondary/70 dark:text-brand-primary/70 group-hover:text-brand-primary transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2h6v2H9zm-4 4h14a2 2 0 002-2V5a2 2 0 00-2-2H7l-2 2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    <span class="text-[11px] font-black uppercase tracking-widest text-brand-secondary dark:text-brand-primary">Expenses</span>
                </span>
                <svg class="w-3 h-3 text-brand-secondary/30 dark:text-brand-primary/30 group-hover:text-brand-primary transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                    <path d="M19 9l-7 7-7-7" />
                </svg>
            </button>
            <div id="expenses-dropdown" class="ml-9 mt-1 space-y-1 border-l-2 border-brand-secondary/10 dark:border-brand-primary/10 hidden">
                <%= link_to project_expenses_path,
              class: "flex items-center px-4 py-2 text-[10px] font-bold uppercase tracking-widest transition-all
              #{current_page?(project_expenses_path) ? 'text-brand-primary border-l-2 border-brand-primary -ml-[2px] bg-brand-primary/5' : 'text-brand-secondary/50 dark:text-brand-primary/40 hover:text-brand-secondary dark:hover:text-white hover:bg-brand-secondary/5'}" do %>
                All Expenses
                <% end %>
                <%= link_to new_project_expense_path,
              class: "flex items-center px-4 py-2 text-[10px] font-bold uppercase tracking-widest transition-all
              #{current_page?(new_project_expense_path) ? 'text-brand-primary border-l-2 border-brand-primary -ml-[2px] bg-brand-primary/5' : 'text-brand-secondary/50 dark:text-brand-primary/40 hover:text-brand-secondary dark:hover:text-white hover:bg-brand-secondary/5'}" do %>
                New Expense
                <% end %>
            </div>
        </div>
        <%# 3. Salary Batches Dropdown %>
        <% if policy(Accounting::SalaryBatch).index? %>
        <div class="group">
            <button type="button" class="flex justify-between items-center w-full px-3 py-2.5 rounded-xl border border-transparent hover:bg-brand-secondary/5 dark:hover:bg-brand-primary/5 transition-all duration-300" onclick="document.getElementById('salary-batches-dropdown').classList.toggle('hidden')">
                <span class="flex items-center">
                    <svg class="w-4 h-4 mr-3 text-brand-secondary/70 dark:text-brand-primary/70 group-hover:text-brand-primary transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3l8 4-8 4-8-4 8-4zm0 8l8 4-8 4-8-4 8-4zm0 8l8 4-8 4-8-4 8-4z" />
                    </svg>
                    <span class="text-[11px] font-black uppercase tracking-widest text-brand-secondary dark:text-brand-primary">Salary Batches</span>
                </span>
                <svg class="w-3 h-3 text-brand-secondary/30 dark:text-brand-primary/30 group-hover:text-brand-primary transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                    <path d="M19 9l-7 7-7-7" />
                </svg>
            </button>
            <div id="salary-batches-dropdown" class="ml-9 mt-1 space-y-1 border-l-2 border-brand-secondary/10 dark:border-brand-primary/10 hidden">
                <%= link_to accounting_salary_batches_path,
                class: "flex items-center px-4 py-2 text-[10px] font-bold uppercase tracking-widest transition-all
                #{current_page?(accounting_salary_batches_path) ? 'text-brand-primary border-l-2 border-brand-primary -ml-[2px] bg-brand-primary/5' : 'text-brand-secondary/50 dark:text-brand-primary/40 hover:text-brand-secondary dark:hover:text-white hover:bg-brand-secondary/5'}" do %>
                All Batches
                <% end %>
                <% if policy(Accounting::SalaryBatch).create? %>
                <%= link_to new_accounting_salary_batch_path,
                  class: "flex items-center px-4 py-2 text-[10px] font-bold uppercase tracking-widest transition-all
                  #{current_page?(new_accounting_salary_batch_path) ? 'text-brand-primary border-l-2 border-brand-primary -ml-[2px] bg-brand-primary/5' : 'text-brand-secondary/50 dark:text-brand-primary/40 hover:text-brand-secondary dark:hover:text-white hover:bg-brand-secondary/5'}" do %>
                New Batch
                <% end %>
                <% end %>
            </div>
        </div>
        <% end %>
        <%# 4. Direct Links: Salaries & Deductions %>
        <div class="pt-2 space-y-1">
            <% if policy(Accounting::Salary).index? %>
            <%= link_to accounting_salaries_path,
              class: "flex items-center px-3 py-2.5 rounded-xl border border-transparent transition-all duration-300
              #{current_page?(accounting_salaries_path) ? 'text-brand-primary bg-brand-primary/5' : 'text-brand-secondary dark:text-brand-primary hover:bg-brand-secondary/5 dark:hover:bg-brand-primary/5 hover:border-brand-secondary/10'}" do %>
            <svg class="w-4 h-4 mr-3 text-current" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 10h16M4 14h10a2 2 0 002-2V6a2 2 0 00-2-2H4a2 2 0 00-2 2v6a2 2 0 002 2z" />
            </svg>
            <span class="text-[11px] font-black uppercase tracking-widest leading-none">Salaries</span>
            <% end %>
            <% end %>
            <% if policy(Accounting::Deduction).index? %>
            <%= link_to accounting_deductions_path,
              class: "flex items-center px-3 py-2.5 rounded-xl border border-transparent transition-all duration-300
              #{current_page?(accounting_deductions_path) ? 'text-brand-primary bg-brand-primary/5' : 'text-brand-secondary dark:text-brand-primary hover:bg-brand-secondary/5 dark:hover:bg-brand-primary/5 hover:border-brand-secondary/10'}" do %>
            <svg class="w-4 h-4 mr-3 text-current" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m9-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span class="text-[11px] font-black uppercase tracking-widest leading-none">Deductions</span>
            <% end %>
            <% end %>
        </div>
    </div>
</div>
<% end %>