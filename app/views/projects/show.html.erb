<% content_for :title, @project.name %>
<%= render "info_card", project: @project %>
<div class="border-b border-hamzis-brown/20 mb-6">
  <nav class="flex gap-6 text-sm font-medium">
    <button data-tab="tasks"
            class="tab-link px-3 py-2 rounded-t bg-hamzis-copper text-white">
      Tasks
    </button>
    <button data-tab="expenses"
            class="tab-link px-3 py-2 rounded-t hover:bg-hamzis-copper hover:text-white">
      Expenses
    </button>
    <button data-tab="budget"
            class="tab-link px-3 py-2 rounded-t hover:bg-hamzis-copper hover:text-white">
      Budget
    </button>
    <button data-tab="reports"
            class="tab-link px-3 py-2 rounded-t hover:bg-hamzis-copper hover:text-white">
      Reports
    </button>
    <button data-tab="inventory"
            class="tab-link px-3 py-2 rounded-t hover:bg-hamzis-copper hover:text-white">
      Inventory
    </button>
  </nav>
</div>
<div id="tasks-tab" class="tab-content">
  <%= render "projects/tabs/tasks", project: @project %>
</div>
<div id="expenses-tab" class="tab-content hidden">
  <%= render "projects/tabs/expenses", project: @project %>
</div>
<div id="budget-tab" class="tab-content hidden">
  <%= render "projects/tabs/budget", project: @project %>
</div>
<div id="reports-tab" class="tab-content hidden">
  <%= render "projects/tabs/reports", project: @project %>
</div>
<div id="inventory-tab" class="tab-content hidden">
  <%= render "projects/tabs/inventory", project: @project %>
</div>
<script nonce="<%= content_security_policy_nonce %>">
  (() => {
    const links = document.querySelectorAll(".tab-link");
    const contents = document.querySelectorAll(".tab-content");

    links.forEach(link => {
      link.addEventListener("click", () => {
        // reset all tabs
        links.forEach(l => l.classList.remove("bg-hamzis-copper", "text-white"));
        contents.forEach(c => c.classList.add("hidden"));

        // activate clicked tab
        link.classList.add("bg-hamzis-copper", "text-white");
        const tabId = link.getAttribute("data-tab") + "-tab";
        document.getElementById(tabId).classList.remove("hidden");
      });
    });
  })();
</script>
