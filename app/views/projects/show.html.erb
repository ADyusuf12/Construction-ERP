<% content_for :title, "#{@project.name} | Site Deployment" %>
<%# Core Site Specifications Card %>
<%= render "info_card", project: @project %>
<!-- Operational Navigation -->
<div class="border-b border-brand-secondary/10 dark:border-brand-primary/10 mb-8 overflow-x-auto custom-scrollbar">
    <nav class="flex flex-nowrap md:flex-wrap gap-2 pb-px min-w-max">
        <%# Navigation Buttons - Unified with Dashboard Style %>
        <button data-tab="tasks" class="tab-link px-6 py-3 rounded-t-xl bg-brand-primary text-white text-[10px] font-black uppercase tracking-[0.2em] shadow-lg transition-all duration-300 cursor-pointer active:scale-95">
            Task Queue
        </button>
        <button data-tab="expenses" class="tab-link px-6 py-3 rounded-t-xl text-brand-secondary/60 dark:text-brand-primary/60 text-[10px] font-black uppercase tracking-[0.2em] hover:bg-brand-secondary/5 dark:hover:bg-brand-primary/10 hover:text-brand-secondary dark:hover:text-brand-primary transition-all duration-300 cursor-pointer">
            Site Expenses
        </button>
        <button data-tab="budget" class="tab-link px-6 py-3 rounded-t-xl text-brand-secondary/60 dark:text-brand-primary/60 text-[10px] font-black uppercase tracking-[0.2em] hover:bg-brand-secondary/5 dark:hover:bg-brand-primary/10 hover:text-brand-secondary dark:hover:text-brand-primary transition-all duration-300 cursor-pointer">
            Budget Analysis
        </button>
        <button data-tab="reports" class="tab-link px-6 py-3 rounded-t-xl text-brand-secondary/60 dark:text-brand-primary/60 text-[10px] font-black uppercase tracking-[0.2em] hover:bg-brand-secondary/5 dark:hover:bg-brand-primary/10 hover:text-brand-secondary dark:hover:text-brand-primary transition-all duration-300 cursor-pointer">
            Daily Reports
        </button>
        <button data-tab="inventory" class="tab-link px-6 py-3 rounded-t-xl text-brand-secondary/60 dark:text-brand-primary/60 text-[10px] font-black uppercase tracking-[0.2em] hover:bg-brand-secondary/5 dark:hover:bg-brand-primary/10 hover:text-brand-secondary dark:hover:text-brand-primary transition-all duration-300 cursor-pointer">
            Inventory
        </button>
        <button data-tab="files" class="tab-link px-6 py-3 rounded-t-xl text-brand-secondary/60 dark:text-brand-primary/60 text-[10px] font-black uppercase tracking-[0.2em] hover:bg-brand-secondary/5 dark:hover:bg-brand-primary/10 hover:text-brand-secondary dark:hover:text-brand-primary transition-all duration-300 cursor-pointer">
            Documentation
        </button>
    </nav>
</div>
<!-- Tab Content Areas with Entrance Animations -->
<div id="project-tab-content-container">
    <div id="tasks-tab" class="tab-content animate-fade-in">
        <%= render "projects/tabs/tasks", project: @project %>
    </div>
    <div id="expenses-tab" class="tab-content hidden animate-fade-in">
        <%= render "projects/tabs/expenses", project: @project %>
    </div>
    <div id="budget-tab" class="tab-content hidden animate-fade-in">
        <%= render "projects/tabs/budget", project: @project %>
    </div>
    <div id="reports-tab" class="tab-content hidden animate-fade-in">
        <%= render "projects/tabs/reports", project: @project %>
    </div>
    <div id="inventory-tab" class="tab-content hidden animate-fade-in">
        <%= render "projects/tabs/inventory", project: @project %>
    </div>
    <div id="files-tab" class="tab-content hidden animate-fade-in">
        <%= render "projects/tabs/files", project: @project %>
    </div>
</div>
<script nonce="<%= content_security_policy_nonce %>">
    (() => {
        const links = document.querySelectorAll(".tab-link");
        const contents = document.querySelectorAll(".tab-content");

        links.forEach(link => {
            link.addEventListener("click", (e) => {
                e.preventDefault();

                // Reset navigation styles
                links.forEach(l => {
                    l.classList.remove("bg-brand-primary", "text-white", "shadow-lg");
                    l.classList.add("text-brand-secondary/60", "dark:text-brand-primary/60");
                });

                // Hide all contents
                contents.forEach(c => c.classList.add("hidden"));

                // Activate current selection
                link.classList.add("bg-brand-primary", "text-white", "shadow-lg");
                link.classList.remove("text-brand-secondary/60", "dark:text-brand-primary/60");

                const tabId = link.getAttribute("data-tab") + "-tab";
                const activeTab = document.getElementById(tabId);
                if (activeTab) {
                    activeTab.classList.remove("hidden");
                }
            });
        });
    })();
</script>