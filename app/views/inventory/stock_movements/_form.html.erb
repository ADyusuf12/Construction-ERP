<%= form_with(model: [ :inventory, @inventory_item, @stock_movement ], local: true, class: "space-y-4") do |f| %>
  <div class="bg-hamzis-white/30 dark:bg-hamzis-black/30 backdrop-blur-md
              border border-hamzis-brown/20 rounded-xl shadow-lg p-6 space-y-4 max-w-2xl">
    <!-- Movement Type -->
    <div>
      <%= f.label :movement_type, "Movement Type", class: "block font-medium mb-1 text-hamzis-brown dark:text-hamzis-copper" %>
      <%= f.select :movement_type, StockMovement.movement_types.keys.map { |t| [t.humanize, t] },
            {}, class: "w-full px-3 py-2 border rounded bg-transparent text-gray-900 dark:text-hamzis-copper" %>
    </div>
    <!-- Quantity -->
    <div>
      <%= f.label :quantity, "Quantity", class: "block font-medium mb-1 text-hamzis-brown dark:text-hamzis-copper" %>
      <%= f.number_field :quantity, step: 1, min: 1,
            class: "w-full px-3 py-2 border rounded bg-transparent text-gray-900 dark:text-hamzis-copper" %>
    </div>
    <!-- Warehouse -->
    <div>
      <%= f.label :warehouse_id, "Warehouse", class: "block font-medium mb-1 text-hamzis-brown dark:text-hamzis-copper" %>
      <%= f.collection_select :warehouse_id, Warehouse.all, :id, :name,
            { prompt: "Select warehouse" },
            class: "w-full px-3 py-2 border rounded bg-transparent text-gray-900 dark:text-hamzis-copper" %>
    </div>
    <!-- Project -->
    <div>
      <%= f.label :project_id, "Project (optional)", class: "block font-medium mb-1 text-hamzis-brown dark:text-hamzis-copper" %>
      <%= f.collection_select :project_id, Project.order(:name), :id, :name,
        { prompt: "Select project" },
        class: "w-full px-3 py-2 border rounded bg-transparent text-gray-900 dark:text-hamzis-copper" %>
    </div>
    <!-- Task -->
    <div>
      <%= f.label :task_id, "Task (optional)", class: "block font-medium mb-1 text-hamzis-brown dark:text-hamzis-copper" %>
      <%= f.collection_select :task_id, Task.order(:title), :id, :title,
        { prompt: "Select task" },
        class: "w-full px-3 py-2 border rounded bg-transparent text-gray-900 dark:text-hamzis-copper" %>
    </div>
    <!-- Reference -->
    <div>
      <%= f.label :reference, "Reference (optional)", class: "block font-medium mb-1 text-hamzis-brown dark:text-hamzis-copper" %>
      <%= f.text_field :reference, class: "w-full px-3 py-2 border rounded bg-transparent text-gray-900 dark:text-hamzis-copper" %>
    </div>
    <!-- Notes -->
    <div>
      <%= f.label :notes, "Notes (optional)", class: "block font-medium mb-1 text-hamzis-brown dark:text-hamzis-copper" %>
      <%= f.text_area :notes, rows: 3, class: "w-full px-3 py-2 border rounded bg-transparent text-gray-900 dark:text-hamzis-copper" %>
    </div>
    <!-- Actions -->
    <div class="flex gap-2">
      <%= f.submit (@stock_movement.persisted? ? "Update Movement" : "Record Movement"),
            class: "px-4 py-2 rounded bg-hamzis-copper text-hamzis-white hover:bg-hamzis-black transition" %>
      <%= link_to "Cancel", inventory_inventory_item_path(@inventory_item),
            class: "px-4 py-2 rounded bg-hamzis-brown text-hamzis-white hover:bg-hamzis-copper transition" %>
    </div>
  </div>
<% end %>
