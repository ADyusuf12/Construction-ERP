<div class="space-y-10">
  <% if salaries.any? %>
    <%# Grouping the collection by Batch for a cleaner UI perspective %>
    <% salaries.includes(:batch, :employee).group_by(&:batch).each do |batch, batch_salaries| %>
      <div class="animate-fade-in">
        <div class="flex items-center justify-between mb-4 px-2">
          <div class="flex items-center gap-3">
            <div class="h-8 w-1 bg-brand-primary rounded-full"></div>
            <div>
              <h3 class="text-lg font-black text-brand-secondary dark:text-brand-primary uppercase tracking-tighter">
                <%= batch.name %>
              </h3>
              <p class="text-[9px] font-bold text-brand-secondary/40 uppercase tracking-[0.2em]">
                <%= batch.period_label %> • <%= batch.status.humanize %>
              </p>
            </div>
          </div>
          <div class="text-right">
            <span class="text-[10px] font-black text-brand-secondary/40 uppercase tracking-widest block">Batch Aggregate</span>
            <span class="text-sm font-mono font-black text-brand-secondary dark:text-white">
              <%= number_to_currency(batch_salaries.sum(&:net_pay), unit: "₦") %>
            </span>
          </div>
        </div>
        <div class="overflow-hidden bg-brand-white/30 dark:bg-brand-black/30 backdrop-blur-md border border-brand-secondary/20 rounded-2xl shadow-xl p-6">
          <div class="overflow-x-auto">
            <table class="min-w-full text-left border-separate border-spacing-0">
              <%= render "accounting/salaries/salary_table_header" %>
              <tbody class="divide-y divide-brand-secondary/10 dark:divide-brand-primary/10">
                <% batch_salaries.each_with_index do |salary, index| %>
                  <%= render "accounting/salaries/salary_row",
                                       salary: salary,
                                       row_class: index.even? ? "bg-brand-secondary/5 dark:bg-brand-primary/5" : "" %>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    <% end %>
  <% else %>
    <%# Empty State %>
    <div class="bg-brand-white/30 dark:bg-brand-black/30 border border-brand-secondary/20 rounded-2xl py-20 text-center">
      <h3 class="text-xl font-black text-brand-secondary dark:text-brand-primary uppercase tracking-tighter italic opacity-50">Zero Payroll Records</h3>
      <p class="text-[10px] text-white/30 mt-2 uppercase tracking-widest italic">Awaiting salary generation protocol.</p>
    </div>
  <% end %>
</div>