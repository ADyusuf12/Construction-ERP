<% content_for :title, "Salary: #{@salary.employee.full_name} | Earmark Finance" %>
<div class="bg-brand-white/30 dark:bg-brand-black/30 backdrop-blur-md border border-brand-secondary/20 rounded-2xl shadow-2xl p-8 mb-10 relative overflow-hidden animate-fade-in">
  <% status_color = @salary.status_paid? ? 'bg-green-500' : 'bg-brand-primary' %>
  <div class="absolute top-0 left-0 w-full h-1 <%= status_color %> opacity-40"></div>
  <div class="flex flex-col md:flex-row justify-between items-start gap-6">
    <div class="flex-1">
      <div class="flex items-center gap-3 mb-2">
        <span class="px-2 py-0.5 rounded bg-brand-secondary/10 border border-brand-secondary/20 text-[9px] font-black uppercase tracking-[0.2em] text-brand-secondary dark:text-brand-primary">
          Personnel Record
        </span>
        <span class="inline-flex items-center gap-1.5 text-[9px] font-black uppercase tracking-widest text-brand-secondary/50 dark:text-brand-primary/50">
          <span class="h-1.5 w-1.5 rounded-full <%= status_color %> <%= 'animate-pulse' unless @salary.status_paid? %>"></span>
          <%= @salary.status.humanize %>
        </span>
      </div>
      <h2 class="text-3xl font-black text-brand-secondary dark:text-white uppercase tracking-tighter italic">
        <%= @salary.employee.full_name %>
      </h2>
      <p class="text-[10px] font-bold text-brand-secondary/40 dark:text-white/40 uppercase tracking-widest mt-1">
        Employee ID: #<%= @salary.employee.id %>
      </p>
    </div>
    <div class="flex flex-wrap md:flex-nowrap gap-3">
      <%= link_to edit_accounting_salary_path(@salary),
          class: "flex items-center gap-2 px-5 py-2.5 rounded-xl bg-brand-primary text-white text-[10px] font-black uppercase tracking-widest shadow-lg hover:bg-brand-black transition-all" do %>
        Edit Voucher
      <% end %>
      <%= link_to accounting_salaries_path,
          class: "flex items-center gap-2 px-5 py-2.5 rounded-xl bg-brand-secondary/10 text-brand-secondary dark:text-white border border-brand-secondary/20 text-[10px] font-black uppercase tracking-widest hover:bg-brand-secondary hover:text-white transition-all" do %>
        All Salaries
      <% end %>
    </div>
  </div>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-10 p-6 rounded-2xl bg-brand-secondary/5 dark:bg-white/5 border border-brand-secondary/10">
    <div class="border-b md:border-b-0 md:border-r border-brand-secondary/10 pb-4 md:pb-0">
      <p class="text-[9px] font-black uppercase tracking-[0.2em] text-brand-primary mb-1">Base Salary</p>
      <p class="text-lg font-black text-brand-secondary dark:text-white font-mono tracking-tighter">
        <%= number_to_currency(@salary.base_pay, unit: "₦") %>
      </p>
    </div>
    <div class="border-b md:border-b-0 md:border-r border-brand-secondary/10 pb-4 md:pb-0">
      <p class="text-[9px] font-black uppercase tracking-[0.2em] text-brand-primary mb-1">Allowances</p>
      <p class="text-lg font-black text-green-600 font-mono tracking-tighter">
        + <%= number_to_currency(@salary.allowances, unit: "₦") %>
      </p>
    </div>
    <div class="border-b md:border-b-0 md:border-r border-brand-secondary/10 pb-4 md:pb-0">
      <p class="text-[9px] font-black uppercase tracking-[0.2em] text-brand-primary mb-1">Total Deductions</p>
      <p class="text-lg font-black text-red-500 font-mono tracking-tighter">
        - <%= number_to_currency(@salary.total_deductions, unit: "₦") %>
      </p>
    </div>
    <div>
      <p class="text-[9px] font-black uppercase tracking-[0.2em] text-brand-primary mb-1">Net Payable</p>
      <p class="text-2xl font-black text-brand-secondary dark:text-white font-mono tracking-tighter">
        <%= number_to_currency(@salary.net_pay, unit: "₦") %>
      </p>
    </div>
  </div>
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-8 mt-8 pt-8 border-t border-brand-secondary/10">
    <div>
      <p class="text-[9px] font-black uppercase tracking-[0.2em] text-brand-primary mb-2">Payment Verification</p>
      <% if @salary.status_paid? %>
        <p class="text-xs font-bold text-green-600 uppercase italic">✔ Disbursement Confirmed</p>
      <% else %>
        <p class="text-xs font-bold text-brand-primary uppercase italic animate-pulse">Pending Disbursement</p>
      <% end %>
    </div>
    <div class="text-right">
      <% if policy(@salary).destroy? %>
        <%= button_to "Void Record", "#",
            class: "text-[10px] font-black uppercase text-red-500/50 hover:text-red-600 transition-colors",
            form: {
              "data-action" => "click->confirm-delete#open",
              "data-confirm-delete-title-param" => "Void Salary Voucher?",
              "data-confirm-delete-message-param" => "This will completely remove the salary record for #{@salary.employee.full_name}. Proceed?",
              "data-confirm-delete-confirm-path-param" => accounting_salary_path(@salary)
            } %>
      <% end %>
    </div>
  </div>
</div>